!function(){return function e(t,a,r){function o(n,s){if(!a[n]){if(!t[n]){var c="function"==typeof require&&require;if(!s&&c)return c(n,!0);if(i)return i(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var d=a[n]={exports:{}};t[n][0].call(d.exports,function(e){return o(t[n][1][e]||e)},d,d.exports,e,t,a,r)}return a[n].exports}for(var i="function"==typeof require&&require,n=0;n<r.length;n++)o(r[n]);return o}}()({1:[function(e,t,a){"use strict";var r,o=e(2),i=(r=o)&&r.__esModule?r:{default:r};mejs.i18n.en["mejs.chromecast-legend"]="Casting to:",Object.assign(mejs.MepDefaults,{castTitle:null,castAppID:null,castPolicy:"origin",castEnableTracks:!1,castIsLive:!1}),Object.assign(MediaElementPlayer.prototype,{buildchromecast:function(e,t,a,r){var o=this,i=document.createElement("div"),n=mejs.Utils.isString(o.options.castTitle)?o.options.castTitle:"Chromecast";if(e.chromecastLayer=document.createElement("div"),e.chromecastLayer.className=o.options.classPrefix+"chromecast-layer "+o.options.classPrefix+"layer",e.chromecastLayer.style.display="none",a.insertBefore(e.chromecastLayer,a.firstChild),i.className=o.options.classPrefix+"button "+o.options.classPrefix+"chromecast-button",i.innerHTML='<button type="button" is="google-cast-button" aria-controls="'+o.id+'" title="'+n+'" aria-label="'+n+'" tabindex="0"></button>',i.style.display="none",o.addControlElement(i,"chromecast"),o.castButton=i,e.chromecastLayer.innerHTML='<div class="'+o.options.classPrefix+'chromecast-container"><span class="'+o.options.classPrefix+'chromecast-icon"></span><span class="'+o.options.classPrefix+'chromecast-info">'+mejs.i18n.t("mejs.chromecast-legend")+' <span class="device"></span></span></div>',r.originalNode.getAttribute("poster")&&(e.chromecastLayer.innerHTML+='<img src="'+r.originalNode.getAttribute("poster")+'" width="100%" height="100%">',e.chromecastLayer.querySelector("img").addEventListener("click",function(){if(e.options.clickToPlayPause){var t=o.container.querySelector("."+o.options.classPrefix+"overlay-button"),a=t.getAttribute("aria-pressed");e.paused?e.play():e.pause(),t.setAttribute("aria-pressed",!!a),e.container.focus()}})),window.__onGCastApiAvailable=function(e){var t=o._getType(r.originalNode).toLowerCase(),a=t&&["application/x-mpegurl","application/vnd.apple.mpegurl","application/dash+xml","video/mp4","audio/mp3","audio/mp4","audio/mpeg"].indexOf(t)>-1;e&&a&&o._initializeCastPlayer()},window.cast){var s=o.controls.querySelector("."+o.options.classPrefix+"chromecast-button>button");return s&&"none"!==s.style.display&&(o.controls.querySelector("."+o.options.classPrefix+"chromecast-button").style.display=""),void o._initializeCastPlayer()}mejs.Utils.loadScript("//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1")},_getType:function(e){var t=e.getAttribute("type");return null==t&&(t=mejs.Utils.getTypeFromFile(e.src)),t},cleanchromecast:function(e){if(window.cast){var t=cast.framework.CastContext.getInstance().getCurrentSession();t&&t.endSession(!0)}e.castButton&&e.castButton.remove(),e.chromecastLayer&&e.chromecastLayer.remove()},_initializeCastPlayer:function(){var e=this,t=void 0;switch(this.options.castPolicy){case"tab":t="TAB_AND_ORIGIN_SCOPED";break;case"page":t="PAGE_SCOPED";break;default:t="ORIGIN_SCOPED"}var a=cast.framework.CastContext.getInstance(),r=a.getCurrentSession();if(a.setOptions({receiverApplicationId:e.options.castAppID||chrome.cast.media.DEFAULT_MEDIA_RECEIVER_APP_ID,autoJoinPolicy:chrome.cast.AutoJoinPolicy[t]}),a.addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,e._checkCastButtonStatus.bind(e)),e.remotePlayer=new cast.framework.RemotePlayer,e.remotePlayerController=new cast.framework.RemotePlayerController(e.remotePlayer),e.remotePlayerController.addEventListener(cast.framework.RemotePlayerEventType.IS_CONNECTED_CHANGED,e._switchToCastPlayer.bind(this)),r){var o=a.getCastState(),i=e.controls.querySelector("."+e.options.classPrefix+"chromecast-button");i&&o===cast.framework.CastState.NO_DEVICES_AVAILABLE?i.style.display="none":i&&(e.chromecastLayer&&(e.chromecastLayer.style.display=o===cast.framework.CastState.CONNECTED?"":"none"),i.style.display=""),e._switchToCastPlayer()}},_checkCastButtonStatus:function(e){var t=this,a=t.controls.querySelector("."+t.options.classPrefix+"chromecast-button");a&&e.castState===cast.framework.CastState.NO_DEVICES_AVAILABLE?a.style.display="none":a&&(t.chromecastLayer&&(t.chromecastLayer.style.display=e.castState===cast.framework.CastState.CONNECTED?"":"none"),a.style.display=""),setTimeout(function(){t.setPlayerSize(t.width,t.height),t.setControlsSize()},0)},_switchToCastPlayer:function(){var e=this;if(e.proxy&&e.proxy.pause(),cast&&cast.framework){if(cast.framework.CastContext.getInstance().addEventListener(cast.framework.CastContextEventType.CAST_STATE_CHANGED,e._checkCastButtonStatus.bind(e)),e.remotePlayer.isConnected)return void e._setupCastPlayer();e.loadedChromecast=!1}e._setDefaultPlayer()},_setupCastPlayer:function(){var e=this,t=cast.framework.CastContext.getInstance().getCurrentSession(),a=e.layers.querySelector("."+e.options.classPrefix+"chromecast-info");!0!==e.loadedChromecast&&(e.loadedChromecast=!0,e.proxy=new i.default(e.remotePlayer,e.remotePlayerController,e.media,e.options),a&&(a.querySelector(".device").innerText=t.getCastDevice().friendlyName),e.chromecastLayer&&(e.chromecastLayer.style.display=""),!0===e.options.castEnableTracks&&function(){var a=void 0!==e.captionsButton?e.captionsButton.querySelectorAll("input[type=radio]"):null;if(null!==a)for(var r=function(e,r){a[e].addEventListener("click",function(){var r=parseInt(a[e].id.replace(/^.*?track_(\d+)_.*$/,"$1")),o="none"===a[e].value?[]:[r],i=new chrome.cast.media.EditTracksInfoRequest(o);t.getMediaSession().editTracksInfo(i,function(){},function(e){console.error(e)})})},o=0,i=a.length;o<i;o++)r(o)}(),e.media.addEventListener("loadedmetadata",function(){-1===["SESSION_ENDING","SESSION_ENDED","NO_SESSION"].indexOf(t.getSessionState())&&e.proxy instanceof DefaultPlayer&&(e.proxy.pause(),e.proxy=new i.default(e.remotePlayer,e.remotePlayerController,e.media,e.options))}),e.media.addEventListener("timeupdate",function(){e.currentMediaTime=e.getCurrentTime()}))}})},{2:2}],2:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}();var o=function(){function e(t,a,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=this;return i.player=t,i.controller=a,i.media=r,i.endedMedia=!1,i.enableTracks=o.castEnableTracks,i.isLive=o.castIsLive,i.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_PAUSED_CHANGED,function(){i.paused?i.pause():i.play(),i.endedMedia=!1}),i.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){i.setMuted(i.player.isMuted),i.volume=0}),i.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED,function(){var e=mejs.Utils.createEvent("loadedmetadata",i.media);i.media.dispatchEvent(e)}),i.controller.addEventListener(cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,function(){i.volume=i.player.volumeLevel;var e=mejs.Utils.createEvent("volumechange",i.media);i.media.dispatchEvent(e)}),i.controller.addEventListener(cast.framework.RemotePlayerEventType.DURATION_CHANGED,function(){var e=mejs.Utils.createEvent("timeupdate",i.media);i.media.dispatchEvent(e)}),i.controller.addEventListener(cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,function(){var e=mejs.Utils.createEvent("timeupdate",i.media);i.media.dispatchEvent(e),!i.isLive&&i.getCurrentTime()>=i.getDuration()&&(i.endedMedia=!0,setTimeout(function(){var e=mejs.Utils.createEvent("ended",i.media);i.media.dispatchEvent(e)},50))}),i.controller.addEventListener(cast.framework.RemotePlayerEventType.IS_MUTED_CHANGED,function(){i.setMuted(i.player.isMuted)}),i.load(),i}return r(e,[{key:"getSrc",value:function(){return this.media.originalNode.src}},{key:"setSrc",value:function(e){this.media.originalNode.src="string"==typeof e?e:e[0].src,this.load()}},{key:"setCurrentTime",value:function(e){this.player.currentTime=e,this.controller.seek();var t=mejs.Utils.createEvent("timeupdate",this.media);this.media.dispatchEvent(t)}},{key:"getCurrentTime",value:function(){return this.player.currentTime}},{key:"getDuration",value:function(){return this.player.duration}},{key:"setVolume",value:function(e){this.player.volumeLevel=e,this.controller.setVolumeLevel();var t=mejs.Utils.createEvent("volumechange",this.media);this.media.dispatchEvent(t)}},{key:"getVolume",value:function(){return this.player.volumeLevel}},{key:"play",value:function(){if(this.player.isPaused){this.controller.playOrPause();var e=mejs.Utils.createEvent("play",this.media);this.media.dispatchEvent(e)}}},{key:"pause",value:function(){if(!this.player.isPaused){this.controller.playOrPause();var e=mejs.Utils.createEvent("pause",this.media);this.media.dispatchEvent(e)}}},{key:"load",value:function(){var e=this;this.media.originalNode.src;if("undefined"!=typeof playQueue){if(!(t=playQueue.songs[playQueue.currentSongIndex]))return}else if("undefined"!=typeof videoModel){if(!videoModel.castable)return;var t={duration:videoModel.duration,title:videoModel.videoTitle,streamable:videoModel.streamable,castable:videoModel.castable,remoteCoverArtUrl:videoModel.remoteCoverArtUrl,contentType:videoModel.contentType,remoteStreamUrl:videoModel.remoteStreamUrl}}var a=this.media.originalNode.getAttribute("type")||t.contentType||mejs.Utils.getTypeFromFile(t.remoteStreamUrl),r=new chrome.cast.media.MediaInfo(t.remoteStreamUrl,a),o=cast.framework.CastContext.getInstance().getCurrentSession();if(t.remoteStreamUrl!==window.location.href&&o){var i=[],n=(e.media.originalNode.children,1);if("undefined"!=typeof videoModel)for(var s of videoModel.remoteCaptions){var c=new chrome.cast.media.Track(n,chrome.cast.media.TrackType.TEXT);c.trackContentId=s.url,c.trackContentType="text/"+s.format,c.subtype=chrome.cast.media.TextTrackType.SUBTITLES,c.name=s.identifier+"("+s.language+")",c.language=s.language,c.customData=null,i.push(c),n++}i.length>0&&(r.textTrackStyle=new chrome.cast.media.TextTrackStyle,r.tracks=i),-1==t.duration?(r.streamType=chrome.cast.media.StreamType.LIVE,r.currentTime=1/0):(r.streamType=chrome.cast.media.StreamType.BUFFERED,r.duration=t.duration,r.currentTime=0),"undefined"!=typeof videoModel?(r.metadata=new chrome.cast.media.MovieMediaMetadata,r.metadata.metadataType=chrome.cast.media.MetadataType.MOVIE):"undefined"!=typeof playQueue&&(r.metadata=new chrome.cast.media.MusicTrackMediaMetadata,r.metadata.metadataType=chrome.cast.media.MetadataType.MUSIC_TRACK),r.metadata.songName=t.title,r.metadata.title=t.title,r.metadata.albumName=t.album,r.metadata.artist=t.artist,r.metadata.trackNumber=t.trackNumber,r.metadata.images=[{url:t.remoteCoverArtUrl}],r.metadata.releaseYear=t.year;var l=new chrome.cast.media.LoadRequest(r);o.loadMedia(l).then(function(){var t=e.media.originalNode.currentTime;e.setCurrentTime(t),e.play();var a=mejs.Utils.createEvent("play",e.media);e.media.dispatchEvent(a)},function(t){e._getErrorMessage(t)})}}},{key:"setMuted",value:function(e){var t=this;!0!==e||this.player.isMuted?!1===e&&this.player.isMuted&&this.controller.muteOrUnmute():this.controller.muteOrUnmute(),setTimeout(function(){var e=mejs.Utils.createEvent("volumechange",t.media);t.media.dispatchEvent(e)},50)}},{key:"canPlayType",value:function(e){return~["application/x-mpegurl","vnd.apple.mpegurl","application/dash+xml","video/mp4","audio/mp3","audio/mp4","audio/mpeg"].indexOf(e)}},{key:"_getErrorMessage",value:function(e){var t=e.description?" : "+e.description:".",a=void 0;switch(e.code){case chrome.cast.ErrorCode.API_NOT_INITIALIZED:a="The API is not initialized"+t;break;case chrome.cast.ErrorCode.CANCEL:a="The operation was canceled by the user"+t;break;case chrome.cast.ErrorCode.CHANNEL_ERROR:a="A channel to the receiver is not available"+t;break;case chrome.cast.ErrorCode.EXTENSION_MISSING:a="The Cast extension is not available"+t;break;case chrome.cast.ErrorCode.INVALID_PARAMETER:a="The parameters to the operation were not valid"+t;break;case chrome.cast.ErrorCode.RECEIVER_UNAVAILABLE:a="No receiver was compatible with the session request"+t;break;case chrome.cast.ErrorCode.SESSION_ERROR:a="A session could not be created, or a session was invalid"+t;break;case chrome.cast.ErrorCode.TIMEOUT:a="The operation timed out"+t;break;default:a="Unknown error: "+e}console.error(a)}},{key:"paused",get:function(){return this.player.isPaused}},{key:"muted",set:function(e){this.setMuted(e)},get:function(){return this.player.isMuted}},{key:"ended",get:function(){return this.endedMedia}},{key:"readyState",get:function(){return this.media.originalNode.readyState}},{key:"currentTime",set:function(e){this.setCurrentTime(e)},get:function(){return this.getCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"volume",set:function(e){this.setVolume(e)},get:function(){return this.getVolume()}},{key:"src",set:function(e){this.setSrc(e)},get:function(){return this.getSrc()}}]),e}();a.default=o,window.ChromecastPlayer=o},{}]},{},[1,2]);